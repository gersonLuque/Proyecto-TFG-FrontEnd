<div class="container mt-4">
  <div class="card">
    <div class="card-body">
      <h1 class="mb-4">Editar Tarea</h1>

      <form>
        <!--        datos de las tareas-->
        <app-task-details [formData]="editTaskForm"
                          [title]="task?.title"
                          [description]="task?.description"
                          [visible]="task?.visible"/>

        <div class="mb-3 d-flex ">
          <div class="col-auto">
            <div class="d-flex flex-column gap-3">
              <!--                    todo quitar el harcode y cambiar la img por su ruta correspondiente-->
              @for (file of task?.fileTasks; track file.fileId) {

                <!-- Archivo PDF -->
                <div class="card border-0 shadow-sm">
                  <div class="card-body d-flex align-items-center py-3">
                    <div class="d-flex">
                      <img [src]="'assets/icons/pdf.svg'" class="img-fluid" style="width: 20px " alt="img">
                      <span class="fw-medium ">{{file.fileName}}</span>
                    </div>
                    <div class="d-flex gap-2 ms-3">
                      <button (click)="downloadFile(file?.prefix,file?.fileName)" class="action-btn download-btn btn btn-link text-secondary p-0" title="Descargar archivo">
                        <i class="bi bi-download"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <!-- Archivo PDF -->
              }

            </div>
          </div>
        </div>


        <!--        carga de ficheros-->
        <app-app-upload-files (uploadedFilesChange)="handleUploadedFiles($event)"></app-app-upload-files>


        <!--        Botón de envío-->
        <button type="submit" class="btn btn-dark w-100 py-2 mt-4" (click)="sendData()">
          Crear Tarea
          @if (isLoading) {
            <p-progress-spinner ariaLabel="loading" [style]="{ width: '30px', height: '25px' }"/>
          }
        </button>
      </form>
    </div>
  </div>
</div>
